<div>moo</div>

<div>moopoo</div>

<div>moot</div>

<div>moo <b>shiny</b> tree</div>

<div><div>moop</div></div>

<div><b>lala</b><b>tree</b><i>hmblah</i></div>


<hr>

<form method="post" action="http://antimatter15.110mb.com" target="xif">
<textarea name="wootness">blahblah</textarea><br>
<input type="submit" onclick="poo()">

<iframe name="xif" id="xif"></iframe>
</form>

<div id="lawg">
</div>


<script>
function log(txt){
document.getElementById("lawg").innerHTML += txt + "<br>"
}
window.onload = function(){
log("woot")
}

function poo(){
document.getElementById("xif").onload = function(){
log("goog")
}
}

function cdsubmit(url,params, callback){
var i = document.createElement("iframe"), //submit target
f = document.createElement("form"), //create new form
d = "xif"+Math.ceil(Math.random()*1337*1337) //random iframe ID

i.id = d; //set iframe id
i.name = d; //set iframe name
i.style.display = "none"; //ssh! it's secret!

f.action = url; //set form action
f.method = "post"; //set form method
f.target = d; //make form submit to iframe
f.style.display = "none"; //ssh! it's secret!

for(var q in params){
var b = document.createElement("input"); //create new input
b.type = "hidden"; //it's hidden! SSH!!!!
b.name = q; //set name
b.value = params[q]; //set value
f.appendChild(b); //add to form
}

var w = document.createElement("div"); //create container
/*Area51 secrecy!!!*/
w.style.display = "none"; 
w.style.height = "1px";
w.style.width = "1px";
w.style.position = "absolute";
w.style.top = "-100px";
w.style.left = "-100px";
/*Declassified*/

w.appendChild(i); //append to container
w.appendChild(f); //ditto

document.body.appendChild(w); //add to document

i.onload = callback; //set callback!
f.submit(); //submit!
}
</script>