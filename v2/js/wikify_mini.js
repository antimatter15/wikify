(function(){var a=({wk_mode:2,wk_server:"http://wikify.appjet.net/",wk_url:window.location.href,wk_style:"http://localhost/Wikify/v2/styles.css",wk_img:"http://localhost/Wikify/v2/img/",wk_removescripts:true,wk_channel:"Spam",wk_channels:{Spam:{edits:0},Update:{edits:0}},wk_dev:false,wk_runinit:true});for(var b in a){if(typeof(window[b])==typeof(undefined)||window[b].innerHTML){window[b]=a[b]}}window.wk_conf=a})();var wk_readyqueue=[];var wk_original_data="";var wk_ui=0;var wk_cache={};function wk_onlaunch(){wk_remode()}if(window.console&&!($.browser.msie&&$.browser.version==6)){try{console.log();console.log("Loading Wikify")}catch(err){}}function wk_log(){if(window.console&&!($.browser.msie&&$.browser.version==6)){var c=arguments,b=c.length;if(b==42){console.log("TEH WORLDZ ASPLODE!")}else{if(b==1){console.log(c[0])}else{if(b==2){console.log(c[0],c[1])}else{if(b==3){console.log(c[0],c[1],c[2])}else{if(b==4){console.log(c[0],c[1],c[2],c[3])}}}}}}}function wk_ready(a){wk_readyqueue.push(a)}wk_ready(function(){if($.browser.msie){$.getScript("http://wikify.googlecode.com/svn-history/r161/trunk/v2/js/jquery.pngFix.js",function(){$(".wk_arrow img").attr("src",$(".wk_arrow img").attr("src").replace(/\.png/g,".gif"));$("#wk_logo").pngFix();$(".wk_btn").pngFix()})}});setInterval(function(){$=jQuery},500);var wk_toolbar='<div id="wk_toolbar"><ul><li class="wk_logo" id="wk_logo"><img src="img/wikify.png" alt="Project Wikify (beta)" title="Collapse Toolbar"></li><li class="wk_space">&nbsp;</li><li id="wk_channel"><ul class="wk_down"><li class="wk_custom">Custom</li></ul><ul id="wk_channel_visible"><li id="wk_channel_text" title="Change Channel">Loading...</li><li class="wk_arrow"><img src="img/down.png" style="padding-top: 5px;"></li></ul></li><li class="wk_space">&nbsp;</li><li class="wk_btn wk_mode wk_btn_original" title="Original">Original</li><li class="wk_btn wk_mode wk_btn_view" title="View">View</li><li class="wk_btn wk_mode wk_btn_edit" title="Edit">Edit</li></ul><ul style="float: right" class="wk_btn wk_btn_news" title="News"><li class="wk_right"><img src="img/package_editors.png"></li><li class="wk_right wk_btn_txt">News</li></ul><ul style="float: right" class="wk_btn wk_btn_help" title="Help"><li class="wk_right"><img src="img/info.png"></li><li class="wk_right wk_btn_txt">Help</li></ul><ul style="float: right" class="wk_btn wk_btn_save" title="Save"><li id="wk_save" class="wk_right"><img src="img/3floppy_unmount.png"></li><li id="wk_saving" class="wk_right" style="display: none"><img src="img/loading.gif"></li><li class="wk_right wk_btn_txt">Save</li></ul></div><div id="wk_expand">&gt;</div><div id="wk_mask"><h1 class="wk_load">Loading...</h1></div><iframe id="wk_iframe" class="wk_fill" border="0"></iframe><div id="wk_news"><div style="float: left; width: 50%"><h3>This Page</h3></div><div style="float: right; width: 50%"><h3>Wikify Global</h3></div></div><div id="wk_help"><span class="wk_note">Move your mouse cursor over the toolbar items to see what they do.</span><div id="wk_tooltip">&nbsp;</div></div><div id="wk_about"><h3>About Project Wikify</h3><p>&copy; 2008-2009 Antimatter15. Please don\'t sue me.</p><p style="font-size: x-small">And no, you can\'t edit this message :P</p><button style="float: left" id="wk_credits">Credits</button><button style="float: right" id="wk_history">History</button></div><div id="wk_msg"><img src="img/info.png" alt="Alert" class="wk_alerticon"><img src="img/button_cancel.png" alt="Dismiss" title="Dismiss Message" class="wk_dismiss"><div id="wk_msgtext">None.</div></div>';(function(b){b.each(["backgroundColor","color"],function(d,c){b.fx.step[c]=function(e){if(e.state==0){e.start=a(b.curCSS(e.elem,c));e.end=a(e.end)}e.elem.style[c]="rgb("+[parseInt((e.pos*(e.end[0]-e.start[0]))+e.start[0]),parseInt((e.pos*(e.end[1]-e.start[1]))+e.start[1]),parseInt((e.pos*(e.end[2]-e.start[2]))+e.start[2])].join(",")+")"}});function a(d){var c;if(d&&d.constructor==Array&&d.length==3){return d}if(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(d)){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}if(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(d)){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}}})(jQuery);jQuery.fn.contentDocument=function(){var a=this[0];if(a.contentDocument){return a.contentDocument}else{if(a.contentWindow&&a.contentWindow.document){return a.contentWindow.document}else{if(a.document){return a.document}else{return null}}}};jQuery.fn.designMode=function(a){var a=a||"on";this.each(function(){var c=$(this);var b=c.contentDocument();if(b&&b.designMode!=a){b.designMode=a}});return this};jQuery.fn.execCommand=function(a,b){this.each(function(){var d=$(this).contentDocument();if(d){try{d.execCommand(a,false,b)}catch(c){}}});return this};function diff_match_patch(){this.Diff_Timeout=1;this.Diff_EditCost=4;this.Diff_DualThreshold=32;this.Match_Balance=0.5;this.Match_Threshold=0.5;this.Match_MinLength=100;this.Match_MaxLength=1000;this.Patch_Margin=4;function a(){var b=0;var d=1;var c=2;while(d!=c){b++;d=c;c=c<<1}return b}this.Match_MaxBits=a()}var DIFF_DELETE=-1;var DIFF_INSERT=1;var DIFF_EQUAL=0;diff_match_patch.prototype.diff_main=function(c,d,f){if(c==d){return[[DIFF_EQUAL,c]]}if(typeof f=="undefined"){f=true}var e=f;var a=this.diff_commonPrefix(c,d);var h=c.substring(0,a);c=c.substring(a);d=d.substring(a);a=this.diff_commonSuffix(c,d);var g=c.substring(c.length-a);c=c.substring(0,c.length-a);d=d.substring(0,d.length-a);var b=this.diff_compute(c,d,e);if(h){b.unshift([DIFF_EQUAL,h])}if(g){b.push([DIFF_EQUAL,g])}this.diff_cleanupMerge(b);return b};diff_match_patch.prototype.diff_compute=function(m,o,q){var w;if(!m){return[[DIFF_INSERT,o]]}if(!o){return[[DIFF_DELETE,m]]}var p=m.length>o.length?m:o;var i=m.length>o.length?o:m;var f=p.indexOf(i);if(f!=-1){w=[[DIFF_INSERT,p.substring(0,f)],[DIFF_EQUAL,i],[DIFF_INSERT,p.substring(f+i.length)]];if(m.length>o.length){w[0][0]=w[2][0]=DIFF_DELETE}return w}p=i=null;var u=this.diff_halfMatch(m,o);if(u){var j=u[0];var k=u[1];var s=u[2];var v=u[3];var a=u[4];var b=this.diff_main(j,s,q);var d=this.diff_main(k,v,q);return b.concat([[DIFF_EQUAL,a]],d)}if(q&&(m.length<100||o.length<100)){q=false}var n;if(q){var c=this.diff_linesToChars(m,o);m=c[0];o=c[1];n=c[2]}w=this.diff_map(m,o);if(!w){w=[[DIFF_DELETE,m],[DIFF_INSERT,o]]}if(q){this.diff_charsToLines(w,n);this.diff_cleanupSemantic(w);w.push([DIFF_EQUAL,""]);var h=0;var r=0;var l=0;var e="";var t="";while(h<w.length){switch(w[h][0]){case DIFF_INSERT:l++;t+=w[h][1];break;case DIFF_DELETE:r++;e+=w[h][1];break;case DIFF_EQUAL:if(r>=1&&l>=1){var c=this.diff_main(e,t,false);w.splice(h-r-l,r+l);h=h-r-l;for(var g=c.length-1;g>=0;g--){w.splice(h,0,c[g])}h=h+c.length}l=0;r=0;e="";t="";break}h++}w.pop()}return w};diff_match_patch.prototype.diff_linesToChars=function(b,c){var d=[];var a={};d[0]="";function g(m){var i="";var k=0;var h=-1;var j=d.length;while(h<m.length-1){h=m.indexOf("\n",k);if(h==-1){h=m.length-1}var l=m.substring(k,h+1);k=h+1;if(a.hasOwnProperty?a.hasOwnProperty(l):(a[l]!==undefined)){i+=String.fromCharCode(a[l])}else{i+=String.fromCharCode(j);a[l]=j;d[j++]=l}}return i}var e=g(b);var f=g(c);return[e,f,d]};diff_match_patch.prototype.diff_charsToLines=function(c,f){for(var a=0;a<c.length;a++){var e=c[a][1];var d=[];for(var b=0;b<e.length;b++){d[b]=f[e.charCodeAt(b)]}c[a][1]=d.join("")}};diff_match_patch.prototype.diff_map=function(j,l){var f=(new Date()).getTime()+this.Diff_Timeout*1000;var o=j.length+l.length-1;var g=this.Diff_DualThreshold*2<o;var q=[];var s=[];var p={};var r={};p[1]=0;r[1]=0;var k,m;var d;var c={};var h=false;var i=!!(c.hasOwnProperty);var n=(j.length+l.length)%2;for(var b=0;b<o;b++){if(this.Diff_Timeout>0&&(new Date()).getTime()>f){return null}q[b]={};for(var e=-b;e<=b;e+=2){if(e==-b||e!=b&&p[e-1]<p[e+1]){k=p[e+1]}else{k=p[e-1]+1}m=k-e;if(g){d=k+","+m;if(n&&(i?c.hasOwnProperty(d):(c[d]!==undefined))){h=true}if(!n){c[d]=b}}while(!h&&k<j.length&&m<l.length&&j.charAt(k)==l.charAt(m)){k++;m++;if(g){d=k+","+m;if(n&&(i?c.hasOwnProperty(d):(c[d]!==undefined))){h=true}if(!n){c[d]=b}}}p[e]=k;q[b][k+","+m]=true;if(k==j.length&&m==l.length){return this.diff_path1(q,j,l)}else{if(h){s=s.slice(0,c[d]+1);var a=this.diff_path1(q,j.substring(0,k),l.substring(0,m));return a.concat(this.diff_path2(s,j.substring(k),l.substring(m)))}}}if(g){s[b]={};for(var e=-b;e<=b;e+=2){if(e==-b||e!=b&&r[e-1]<r[e+1]){k=r[e+1]}else{k=r[e-1]+1}m=k-e;d=(j.length-k)+","+(l.length-m);if(!n&&(i?c.hasOwnProperty(d):(c[d]!==undefined))){h=true}if(n){c[d]=b}while(!h&&k<j.length&&m<l.length&&j.charAt(j.length-k-1)==l.charAt(l.length-m-1)){k++;m++;d=(j.length-k)+","+(l.length-m);if(!n&&(i?c.hasOwnProperty(d):(c[d]!==undefined))){h=true}if(n){c[d]=b}}r[e]=k;s[b][k+","+m]=true;if(h){q=q.slice(0,c[d]+1);var a=this.diff_path1(q,j.substring(0,j.length-k),l.substring(0,l.length-m));return a.concat(this.diff_path2(s,j.substring(j.length-k),l.substring(l.length-m)))}}}}return null};diff_match_patch.prototype.diff_path1=function(h,e,f){var d=[];var a=e.length;var b=f.length;var g=null;for(var c=h.length-2;c>=0;c--){while(1){if(h[c].hasOwnProperty?h[c].hasOwnProperty((a-1)+","+b):(h[c][(a-1)+","+b]!==undefined)){a--;if(g===DIFF_DELETE){d[0][1]=e.charAt(a)+d[0][1]}else{d.unshift([DIFF_DELETE,e.charAt(a)])}g=DIFF_DELETE;break}else{if(h[c].hasOwnProperty?h[c].hasOwnProperty(a+","+(b-1)):(h[c][a+","+(b-1)]!==undefined)){b--;if(g===DIFF_INSERT){d[0][1]=f.charAt(b)+d[0][1]}else{d.unshift([DIFF_INSERT,f.charAt(b)])}g=DIFF_INSERT;break}else{a--;b--;if(g===DIFF_EQUAL){d[0][1]=e.charAt(a)+d[0][1]}else{d.unshift([DIFF_EQUAL,e.charAt(a)])}g=DIFF_EQUAL}}}}return d};diff_match_patch.prototype.diff_path2=function(d,a,c){var e=[];var f=0;var g=a.length;var h=c.length;var b=null;for(var i=d.length-2;i>=0;i--){while(1){if(d[i].hasOwnProperty?d[i].hasOwnProperty((g-1)+","+h):(d[i][(g-1)+","+h]!==undefined)){g--;if(b===DIFF_DELETE){e[f-1][1]+=a.charAt(a.length-g-1)}else{e[f++]=[DIFF_DELETE,a.charAt(a.length-g-1)]}b=DIFF_DELETE;break}else{if(d[i].hasOwnProperty?d[i].hasOwnProperty(g+","+(h-1)):(d[i][g+","+(h-1)]!==undefined)){h--;if(b===DIFF_INSERT){e[f-1][1]+=c.charAt(c.length-h-1)}else{e[f++]=[DIFF_INSERT,c.charAt(c.length-h-1)]}b=DIFF_INSERT;break}else{g--;h--;if(b===DIFF_EQUAL){e[f-1][1]+=a.charAt(a.length-g-1)}else{e[f++]=[DIFF_EQUAL,a.charAt(a.length-g-1)]}b=DIFF_EQUAL}}}}return e};diff_match_patch.prototype.diff_commonPrefix=function(c,d){if(!c||!d||c.charCodeAt(0)!==d.charCodeAt(0)){return 0}var f=0;var b=Math.min(c.length,d.length);var a=b;var e=0;while(f<a){if(c.substring(e,a)==d.substring(e,a)){f=a;e=f}else{b=a}a=Math.floor((b-f)/2+f)}return a};diff_match_patch.prototype.diff_commonSuffix=function(d,e){if(!d||!e||d.charCodeAt(d.length-1)!==e.charCodeAt(e.length-1)){return 0}var f=0;var c=Math.min(d.length,e.length);var a=c;var b=0;while(f<a){if(d.substring(d.length-a,d.length-b)==e.substring(e.length-a,e.length-b)){f=a;b=f}else{c=a}a=Math.floor((c-f)/2+f)}return a};diff_match_patch.prototype.diff_halfMatch=function(b,c){var h=b.length>c.length?b:c;var a=b.length>c.length?c:b;if(h.length<10||a.length<1){return null}var e=this;function j(s,z,w){var u=s.substring(w,w+Math.floor(s.length/4));var y=-1;var o="";var v,x,p,q;while((y=z.indexOf(u,y+1))!=-1){var t=e.diff_commonPrefix(s.substring(w),z.substring(y));var r=e.diff_commonSuffix(s.substring(0,w),z.substring(0,y));if(o.length<r+t){o=z.substring(y-r,y)+z.substring(y,y+t);v=s.substring(0,w-r);x=s.substring(w+t);p=z.substring(0,y-r);q=z.substring(y+t)}}if(o.length>=s.length/2){return[v,x,p,q,o]}else{return null}}var l=j(h,a,Math.ceil(h.length/4));var m=j(h,a,Math.ceil(h.length/2));var d;if(!l&&!m){return null}else{if(!m){d=l}else{if(!l){d=m}else{d=l[4].length>m[4].length?l:m}}}var i,k,f,g;if(b.length>c.length){i=d[0];k=d[1];f=d[2];g=d[3]}else{f=d[0];g=d[1];i=d[2];k=d[3]}var n=d[4];return[i,k,f,g,n]};diff_match_patch.prototype.diff_cleanupSemantic=function(b){var f=false;var a=[];var d=0;var e=null;var c=0;var g=0;var h=0;while(c<b.length){if(b[c][0]==DIFF_EQUAL){a[d++]=c;g=h;h=0;e=b[c][1]}else{h+=b[c][1].length;if(e!==null&&(e.length<=g)&&(e.length<=h)){b.splice(a[d-1],0,[DIFF_DELETE,e]);b[a[d-1]+1][0]=DIFF_INSERT;d--;d--;c=d>0?a[d-1]:-1;g=0;h=0;e=null;f=true}}c++}if(f){this.diff_cleanupMerge(b)}this.diff_cleanupSemanticLossless(b)};diff_match_patch.prototype.diff_cleanupSemanticLossless=function(q){var n=/[^a-zA-Z0-9]/;var b=/\s/;var o=/[\r\n]/;var i=/\n\r?\n$/;var r=/^\r?\n\r?\n/;function m(t,u){if(!t||!u){return 5}var s=0;if(t.charAt(t.length-1).match(n)||u.charAt(0).match(n)){s++;if(t.charAt(t.length-1).match(b)||u.charAt(0).match(b)){s++;if(t.charAt(t.length-1).match(o)||u.charAt(0).match(o)){s++;if(t.match(i)||u.match(r)){s++}}}}return s}var e=1;while(e<q.length-1){if(q[e-1][0]==DIFF_EQUAL&&q[e+1][0]==DIFF_EQUAL){var k=q[e-1][1];var g=q[e][1];var l=q[e+1][1];var a=this.diff_commonSuffix(k,g);if(a){var p=g.substring(g.length-a);k=k.substring(0,k.length-a);g=p+g.substring(0,g.length-a);l=p+l}var d=k;var h=g;var f=l;var j=m(k,g)+m(g,l);while(g.charAt(0)===l.charAt(0)){k+=g.charAt(0);g=g.substring(1)+l.charAt(0);l=l.substring(1);var c=m(k,g)+m(g,l);if(c>=j){j=c;d=k;h=g;f=l}}if(q[e-1][1]!=d){if(d){q[e-1][1]=d}else{q.splice(e-1,1);e--}q[e][1]=h;if(f){q[e+1][1]=f}else{q.splice(e+1,1);e--}}}e++}};diff_match_patch.prototype.diff_cleanupEfficiency=function(h){var f=false;var i=[];var b=0;var a="";var d=0;var g=false;var e=false;var c=false;var j=false;while(d<h.length){if(h[d][0]==DIFF_EQUAL){if(h[d][1].length<this.Diff_EditCost&&(c||j)){i[b++]=d;g=c;e=j;a=h[d][1]}else{b=0;a=""}c=j=false}else{if(h[d][0]==DIFF_DELETE){j=true}else{c=true}if(a&&((g&&e&&c&&j)||((a.length<this.Diff_EditCost/2)&&(g+e+c+j)==3))){h.splice(i[b-1],0,[DIFF_DELETE,a]);h[i[b-1]+1][0]=DIFF_INSERT;b--;a="";if(g&&e){c=j=true;b=0}else{b--;d=b>0?i[b-1]:-1;c=j=false}f=true}}d++}if(f){this.diff_cleanupMerge(h)}};diff_match_patch.prototype.diff_cleanupMerge=function(b){b.push([DIFF_EQUAL,""]);var c=0;var d=0;var e=0;var g="";var h="";var a;while(c<b.length){switch(b[c][0]){case DIFF_INSERT:e++;h+=b[c][1];c++;break;case DIFF_DELETE:d++;g+=b[c][1];c++;break;case DIFF_EQUAL:if(d!==0||e!==0){if(d!==0&&e!==0){a=this.diff_commonPrefix(h,g);if(a!==0){if((c-d-e)>0&&b[c-d-e-1][0]==DIFF_EQUAL){b[c-d-e-1][1]+=h.substring(0,a)}else{b.splice(0,0,[DIFF_EQUAL,h.substring(0,a)]);c++}h=h.substring(a);g=g.substring(a)}a=this.diff_commonSuffix(h,g);if(a!==0){b[c][1]=h.substring(h.length-a)+b[c][1];h=h.substring(0,h.length-a);g=g.substring(0,g.length-a)}}if(d===0){b.splice(c-d-e,d+e,[DIFF_INSERT,h])}else{if(e===0){b.splice(c-d-e,d+e,[DIFF_DELETE,g])}else{b.splice(c-d-e,d+e,[DIFF_DELETE,g],[DIFF_INSERT,h])}}c=c-d-e+(d?1:0)+(e?1:0)+1}else{if(c!==0&&b[c-1][0]==DIFF_EQUAL){b[c-1][1]+=b[c][1];b.splice(c,1)}else{c++}}e=0;d=0;g="";h="";break}}if(b[b.length-1][1]===""){b.pop()}var f=false;c=1;while(c<b.length-1){if(b[c-1][0]==DIFF_EQUAL&&b[c+1][0]==DIFF_EQUAL){if(b[c][1].substring(b[c][1].length-b[c-1][1].length)==b[c-1][1]){b[c][1]=b[c-1][1]+b[c][1].substring(0,b[c][1].length-b[c-1][1].length);b[c+1][1]=b[c-1][1]+b[c+1][1];b.splice(c-1,1);f=true}else{if(b[c][1].substring(0,b[c+1][1].length)==b[c+1][1]){b[c-1][1]+=b[c+1][1];b[c][1]=b[c][1].substring(b[c+1][1].length)+b[c+1][1];b.splice(c+1,1);f=true}}}c++}if(f){this.diff_cleanupMerge(b)}};diff_match_patch.prototype.diff_xIndex=function(b,c){var e=0;var g=0;var d=0;var f=0;var a;for(a=0;a<b.length;a++){if(b[a][0]!==DIFF_INSERT){e+=b[a][1].length}if(b[a][0]!==DIFF_DELETE){g+=b[a][1].length}if(e>c){break}d=e;f=g}if(b.length!=a&&b[a][0]===DIFF_DELETE){return f}return f+(c-d)};diff_match_patch.prototype.diff_prettyHtml=function(c){var f=[];var g=0;for(var a=0;a<c.length;a++){var b=c[a][0];var e=c[a][1];var d=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"&para;<BR>");switch(b){case DIFF_INSERT:f[a]='<INS STYLE="background:#E6FFE6;" TITLE="i='+g+'">'+d+"</INS>";break;case DIFF_DELETE:f[a]='<DEL STYLE="background:#FFE6E6;" TITLE="i='+g+'">'+d+"</DEL>";break;case DIFF_EQUAL:f[a]='<SPAN TITLE="i='+g+'">'+d+"</SPAN>";break}if(b!==DIFF_DELETE){g+=e.length}}return f.join("")};diff_match_patch.prototype.diff_text1=function(b){var c=[];for(var a=0;a<b.length;a++){if(b[a][0]!==DIFF_INSERT){c[a]=b[a][1]}}return c.join("")};diff_match_patch.prototype.diff_text2=function(b){var c=[];for(var a=0;a<b.length;a++){if(b[a][0]!==DIFF_DELETE){c[a]=b[a][1]}}return c.join("")};diff_match_patch.prototype.diff_toDelta=function(b){var c=[];for(var a=0;a<b.length;a++){switch(b[a][0]){case DIFF_INSERT:c[a]="+"+encodeURI(b[a][1]);break;case DIFF_DELETE:c[a]="-"+b[a][1].length;break;case DIFF_EQUAL:c[a]="="+b[a][1].length;break}}return c.join("\t").replace(/\x00/g,"%00").replace(/%20/g," ")};diff_match_patch.prototype.diff_fromDelta=function(c,f){var j=[];var k=0;var d=0;f=f.replace(/%00/g,"\0");var h=f.split(/\t/g);for(var g=0;g<h.length;g++){var a=h[g].substring(1);switch(h[g].charAt(0)){case"+":try{j[k++]=[DIFF_INSERT,decodeURI(a)]}catch(i){throw new Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var b=parseInt(a,10);if(isNaN(b)||b<0){throw new Error("Invalid number in diff_fromDelta: "+a)}var e=c.substring(d,d+=b);if(h[g].charAt(0)=="="){j[k++]=[DIFF_EQUAL,e]}else{j[k++]=[DIFF_DELETE,e]}break;default:if(h[g]){throw new Error("Invalid diff operation in diff_fromDelta: "+h[g])}}}if(d!=c.length){throw new Error("Delta length ("+d+") does not equal source text length ("+c.length+").")}return j};diff_match_patch.prototype.match_main=function(b,a,c){c=Math.max(0,Math.min(c,b.length-a.length));if(b==a){return 0}else{if(b.length===0){return null}else{if(b.substring(c,c+a.length)==a){return c}else{return this.match_bitap(b,a,c)}}}};diff_match_patch.prototype.match_bitap=function(k,d,m){if(d.length>this.Match_MaxBits){throw new Error("Pattern too long for this browser.")}var j=this.match_alphabet(d);var a=k.length;a=Math.max(a,this.Match_MinLength);a=Math.min(a,this.Match_MaxLength);var t=this;function s(v,w){var u=Math.abs(m-w);return(v/d.length/t.Match_Balance)+(u/a/(1-t.Match_Balance))}var h=this.Match_Threshold;var r=k.indexOf(d,m);if(r!=-1){h=Math.min(s(0,r),h)}r=k.lastIndexOf(d,m+d.length);if(r!=-1){h=Math.min(s(0,r),h)}var b=1<<(d.length-1);r=null;var p,l;var o=Math.max(m+m,k.length);var n;for(var c=0;c<d.length;c++){var g=Array(k.length);p=m;l=o;while(p<l){if(s(c,l)<h){p=l}else{o=l}l=Math.floor((o-p)/2+p)}o=l;var q=Math.max(0,m-(l-m)-1);var i=Math.min(k.length-1,d.length+l);if(k.charAt(i)==d.charAt(d.length-1)){g[i]=(1<<(c+1))-1}else{g[i]=(1<<c)-1}for(var f=i-1;f>=q;f--){if(c===0){g[f]=((g[f+1]<<1)|1)&j[k.charAt(f)]}else{g[f]=((g[f+1]<<1)|1)&j[k.charAt(f)]|((n[f+1]<<1)|1)|((n[f]<<1)|1)|n[f+1]}if(g[f]&b){var e=s(c,f);if(e<=h){h=e;r=f;if(f>m){q=Math.max(0,m-(f-m))}else{break}}}}if(s(c+1,m)>h){break}n=g}return r};diff_match_patch.prototype.match_alphabet=function(b){var c={};for(var a=0;a<b.length;a++){c[b.charAt(a)]=0}for(var a=0;a<b.length;a++){c[b.charAt(a)]|=1<<(b.length-a-1)}return c};diff_match_patch.prototype.patch_addContext=function(b,c){var f=c.substring(b.start2,b.start2+b.length1);var d=0;while(c.indexOf(f)!=c.lastIndexOf(f)&&f.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin){d+=this.Patch_Margin;f=c.substring(b.start2-d,b.start2+b.length1+d)}d+=this.Patch_Margin;var a=c.substring(b.start2-d,b.start2);if(a!==""){b.diffs.unshift([DIFF_EQUAL,a])}var e=c.substring(b.start2+b.length1,b.start2+b.length1+d);if(e!==""){b.diffs.push([DIFF_EQUAL,e])}b.start1-=a.length;b.start2-=a.length;b.length1+=a.length+e.length;b.length2+=a.length+e.length};diff_match_patch.prototype.patch_make=function(f,c,e){var b,j;if(typeof f=="string"&&typeof c=="string"&&typeof e=="undefined"){b=f;j=this.diff_main(b,c,true);if(j.length>2){this.diff_cleanupSemantic(j);this.diff_cleanupEfficiency(j)}}else{if(typeof f=="object"&&typeof c=="undefined"&&typeof e=="undefined"){j=f;b=this.diff_text1(j)}else{if(typeof f=="string"&&typeof c=="object"&&typeof e=="undefined"){b=f;j=c}else{if(typeof f=="string"&&typeof c=="string"&&typeof e=="object"){b=f;j=e}else{throw new Error("Unknown call format to patch_make.")}}}}if(j.length===0){return[]}var d=[];var a=new patch_obj();var m=0;var k=0;var l=0;var n=b;var h=b;for(var g=0;g<j.length;g++){var o=j[g][0];var i=j[g][1];if(!m&&o!==DIFF_EQUAL){a.start1=k;a.start2=l}switch(o){case DIFF_INSERT:a.diffs[m++]=j[g];a.length2+=i.length;h=h.substring(0,l)+i+h.substring(l);break;case DIFF_DELETE:a.length1+=i.length;a.diffs[m++]=j[g];h=h.substring(0,l)+h.substring(l+i.length);break;case DIFF_EQUAL:if(i.length<=2*this.Patch_Margin&&m&&j.length!=g+1){a.diffs[m++]=j[g];a.length1+=i.length;a.length2+=i.length}else{if(i.length>=2*this.Patch_Margin){if(m){this.patch_addContext(a,n);d.push(a);a=new patch_obj();m=0;n=h}}}break}if(o!==DIFF_INSERT){k+=i.length}if(o!==DIFF_DELETE){l+=i.length}}if(m){this.patch_addContext(a,n);d.push(a)}return d};diff_match_patch.prototype.patch_apply=function(m,h){if(m.length==0){return[h,[]]}var c=[];for(var j=0;j<m.length;j++){var q=m[j];var g=new patch_obj();g.diffs=q.diffs.slice();g.start1=q.start1;g.start2=q.start2;g.length1=q.length1;g.length2=q.length2;c[j]=g}m=c;var a=this.patch_addPadding(m);h=a+h+a;this.patch_splitMax(m);var d=0;var e=[];for(var j=0;j<m.length;j++){var p=m[j].start2+d;var i=this.diff_text1(m[j].diffs);var f=this.match_main(h,i,p);if(f===null){e[j]=false}else{e[j]=true;d=f-p;var k=h.substring(f,f+i.length);if(i==k){h=h.substring(0,f)+this.diff_text2(m[j].diffs)+h.substring(f+i.length)}else{var r=this.diff_main(i,k,false);this.diff_cleanupSemanticLossless(r);var n=0;var o;for(var l=0;l<m[j].diffs.length;l++){var b=m[j].diffs[l];if(b[0]!==DIFF_EQUAL){o=this.diff_xIndex(r,n)}if(b[0]===DIFF_INSERT){h=h.substring(0,f+o)+b[1]+h.substring(f+o)}else{if(b[0]===DIFF_DELETE){h=h.substring(0,f+o)+h.substring(f+this.diff_xIndex(r,n+b[1].length))}}if(b[0]!==DIFF_DELETE){n+=b[1].length}}}}}h=h.substring(a.length,h.length-a.length);return[h,e]};diff_match_patch.prototype.patch_addPadding=function(e){var f="";for(var a=0;a<this.Patch_Margin;a++){f+=String.fromCharCode(a)}for(var a=0;a<e.length;a++){e[a].start1+=f.length;e[a].start2+=f.length}var b=e[0];var c=b.diffs;if(c.length==0||c[0][0]!=DIFF_EQUAL){c.unshift([DIFF_EQUAL,f]);b.start1-=f.length;b.start2-=f.length;b.length1+=f.length;b.length2+=f.length}else{if(f.length>c[0][1].length){var d=f.length-c[0][1].length;c[0][1]=f.substring(c[0][1].length)+c[0][1];b.start1-=d;b.start2-=d;b.length1+=d;b.length2+=d}}b=e[e.length-1];c=b.diffs;if(c.length==0||c[c.length-1][0]!=DIFF_EQUAL){c.push([DIFF_EQUAL,f]);b.length1+=f.length;b.length2+=f.length}else{if(f.length>c[c.length-1][1].length){var d=f.length-c[c.length-1][1].length;c[c.length-1][1]+=f.substring(0,d);b.length1+=d;b.length2+=d}}return f};diff_match_patch.prototype.patch_splitMax=function(d){for(var e=0;e<d.length;e++){if(d[e].length1>this.Match_MaxBits){var k=d[e];d.splice(e--,1);var h=this.Match_MaxBits;var b=k.start1;var c=k.start2;var j="";while(k.diffs.length!==0){var l=new patch_obj();var g=true;l.start1=b-j.length;l.start2=c-j.length;if(j!==""){l.length1=l.length2=j.length;l.diffs.push([DIFF_EQUAL,j])}while(k.diffs.length!==0&&l.length1<h-this.Patch_Margin){var i=k.diffs[0][0];var f=k.diffs[0][1];if(i===DIFF_INSERT){l.length2+=f.length;c+=f.length;l.diffs.push(k.diffs.shift());g=false}else{f=f.substring(0,h-l.length1-this.Patch_Margin);l.length1+=f.length;b+=f.length;if(i===DIFF_EQUAL){l.length2+=f.length;c+=f.length}else{g=false}l.diffs.push([i,f]);if(f==k.diffs[0][1]){k.diffs.shift()}else{k.diffs[0][1]=k.diffs[0][1].substring(f.length)}}}j=this.diff_text2(l.diffs);j=j.substring(j.length-this.Patch_Margin);var a=this.diff_text1(k.diffs).substring(0,this.Patch_Margin);if(a!==""){l.length1+=a.length;l.length2+=a.length;if(l.diffs.length!==0&&l.diffs[l.diffs.length-1][0]===DIFF_EQUAL){l.diffs[l.diffs.length-1][1]+=a}else{l.diffs.push([DIFF_EQUAL,a])}}if(!g){d.splice(++e,0,l)}}}}};diff_match_patch.prototype.patch_toText=function(c){var b=[];for(var a=0;a<c.length;a++){b[a]=c[a]}return b.join("")};diff_match_patch.prototype.patch_fromText=function(h){var d=[];if(!h){return d}h=h.replace(/%00/g,"\0");var g=h.split("\n");var f=0;while(f<g.length){var a=g[f].match(/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/);if(!a){throw new Error("Invalid patch string: "+g[f])}var c=new patch_obj();d.push(c);c.start1=parseInt(a[1],10);if(a[2]===""){c.start1--;c.length1=1}else{if(a[2]=="0"){c.length1=0}else{c.start1--;c.length1=parseInt(a[2],10)}}c.start2=parseInt(a[3],10);if(a[4]===""){c.start2--;c.length2=1}else{if(a[4]=="0"){c.length2=0}else{c.start2--;c.length2=parseInt(a[4],10)}}f++;while(f<g.length){var b=g[f].charAt(0);try{var e=decodeURI(g[f].substring(1))}catch(i){throw new Error("Illegal escape in patch_fromText: "+e)}if(b=="-"){c.diffs.push([DIFF_DELETE,e])}else{if(b=="+"){c.diffs.push([DIFF_INSERT,e])}else{if(b==" "){c.diffs.push([DIFF_EQUAL,e])}else{if(b=="@"){break}else{if(b===""){}else{throw new Error('Invalid patch mode "'+b+'" in: '+e)}}}}}f++}}return d};function patch_obj(){this.diffs=[];this.start1=null;this.start2=null;this.length1=0;this.length2=0}patch_obj.prototype.toString=function(){var e,b;if(this.length1===0){e=this.start1+",0"}else{if(this.length1==1){e=this.start1+1}else{e=(this.start1+1)+","+this.length1}}if(this.length2===0){b=this.start2+",0"}else{if(this.length2==1){b=this.start2+1}else{b=(this.start2+1)+","+this.length2}}var d=["@@ -"+e+" +"+b+" @@\n"];var c;for(var a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case DIFF_INSERT:c="+";break;case DIFF_DELETE:c="-";break;case DIFF_EQUAL:c=" ";break}d[a+1]=c+encodeURI(this.diffs[a][1])+"\n"}return d.join("").replace(/\x00/g,"%00").replace(/%20/g," ")};function wk_enable_edit(){$("#wk_iframe").data("hasEdit",true);wk_doc=$("#wk_iframe").contentDocument();if($.browser.mozilla||$.browser.safari){$("#wk_iframe").designMode("on");$("#wk_iframe").execCommand("useCSS",true);if($.browser.mozilla){wk_mozeditfix()}$("#wk_iframe").data("useDesignMode",true)}else{wk_doc.body.contentEditable=true}wk_keyboard();wk_autosnapshot();$("#wk_iframe").one("load",function(){wk_autosnapshot()})}function wk_keyboard(){if(!$("#wk_iframe").data("wkhd")){$(wk_doc.documentElement).keypress(function(a){if(wk_mode<2){wk_showmsg("If you want to edit the page, first enter Edit mode.")}if(a.ctrlKey&&a.charCode==115&&wk_mode==2){a.preventDefault();$(".wk_btn_save").click()}});$("#wk_iframe").data("wkhd",true)}}function wk_html_edit(){if(!$("#wk_iframe").data("inshtl")){$(wk_doc.documentElement).keypress(function(a){if(a.ctrlKey&&a.charCode==104){a.preventDefault();$("#wk_iframe").execCommand("inserthtml",prompt("Enter HTML to insert:"))}})}$("#wk_iframe").data("inshtl",true)}function wk_disable_edit(){if($("#wk_iframe").data("hasEdit")==true){if(!$("#wk_iframe").data("useDesignMode")){wk_doc.body.contentEditable=false}else{$("#wk_iframe").designMode("off")}}}function wk_mozeditfix(){if(!$("#wk_iframe").data("hasEvent")){$(wk_doc.documentElement).keypress(function(b){var a=String.fromCharCode(b.charCode).toLowerCase();if("biu".indexOf(a)!=-1&&b.ctrlKey){$("#wk_iframe").execCommand(({b:"bold",i:"italic",u:"underline"})[a],null);b.preventDefault()}});$("#wk_iframe").data("hasEvent",true)}}function wk_original(){$(".wk_btn_save").fadeOut();wk_mode=0;wk_write_original();setTimeout(function(){wk_disable_edit();wk_patch_links();wk_mask(false);$("#wk_premask").slideUp("slow")},200)}function wk_view(){$(".wk_btn_save").fadeOut();wk_mode=1;wk_write_original();setTimeout(function(){wk_disable_edit();wk_load(function(){wk_mask(false);wk_patch_links();$("#wk_premask").slideUp("slow")})},200)}function wk_edit(){$(".wk_btn_save").fadeIn();wk_mode=2;wk_write_original();setTimeout(function(){wk_load(function(){$(".wk_btn_save").fadeIn();wk_enable_edit();wk_mask(false);$("#wk_premask").slideUp("slow")})},200)}function wk_setmode(a){wk_mode=a;wk_remode()}function wk_remode(){$([".wk_btn_original",".wk_btn_view",".wk_btn_edit"][wk_mode]).click()}wk_ready(function(){$(".wk_mode").click(function(){$(".wk_mode").animate({color:"#858585"});wk_mask(true);$(this).animate({color:"#ffffff"})});$(".wk_btn_original").click(wk_original);$(".wk_btn_view").click(wk_view);$(".wk_btn_edit").click(wk_edit)});wk_ready(function(){$(".wk_btn_save").click(function(){wk_saving(true);wk_diffsave(function(){setTimeout(function(){wk_saving(false)},250)})});$(".wk_btn_news").click(function(){wk_hideabout();$("#wk_help").slideUp().queue(function(){$("#wk_news").slideToggle();$(this).dequeue()})});$(".wk_btn_help").click(function(){$("#wk_news").slideUp().queue(function(){if($("#wk_help").css("display")=="none"){$("#wk_about").css("top",-$("#wk_about").height());$("#wk_about").css("left",($(window).width()/2)-($("#wk_about").width()/2));$("#wk_about").css("display","block");$("#wk_about").css("opacity",0.8);$(window).trigger("resize");setTimeout(function(){$(".wk_btn_help").trigger("mouseover")},100)}else{wk_hideabout()}$("#wk_help").slideToggle();$(this).dequeue()})});$("#wk_channel_visible").click(function(){$(".wk_down").slideToggle();$("#wk_news").slideUp();$("#wk_help").slideUp();wk_hideabout()});$("#wk_channel").hover(function(a){},function(a){if($(".wk_down").queue().length==0){setTimeout(function(){$(".wk_down").slideUp()},500)}});$(".wk_custom").click(function(){var a=prompt("Enter name of channel you would like to go to or create.");$(".wk_down").slideUp();if(a){wk_set_channel(a)}else{}})});function wk_collapse(){$("#wk_news").slideUp();$("#wk_help").slideUp();$(".wk_down").slideUp();wk_hideabout();$("#wk_toolbar").animate({left:"-100%"});$("#wk_iframe").animate({top:"0px"},null,null,function(){$(window).resize()})}function wk_expand(){$("#wk_toolbar").animate({left:"0%"});$("#wk_iframe").animate({top:30},null,null,function(){$(window).resize()})}function wk_resize(){if($(window).width()<800){if($(window).width()<500){wk_ui=2;wk_render_channels();if($(window).width()<370){$(".wk_btn_original").text("O");$(".wk_btn_view").text("V");$(".wk_btn_edit").text("E")}else{$(".wk_btn_original").text("Org");$(".wk_btn_view").text("Viw");$(".wk_btn_edit").text("Edt")}}else{$(".wk_btn_original").text("Original");$(".wk_btn_view").text("View");$(".wk_btn_edit").text("Edit")}wk_ui=1;if($(window).width()<500){wk_ui=2}if($(window).width()<340){wk_ui=3}wk_render_channels();$("#wk_help").css("height","55px");$("li.wk_space").hide("slow");$(".wk_btn_txt").hide("slow");$("#wk_logo").stop(true).animate({width:32})}else{wk_ui=0;$("li.wk_space").show("slow");$("#wk_help").css("height","");wk_render_channels();$(".wk_btn_txt").show("slow");$("#wk_logo").stop(true).animate({width:190})}$("#wk_about").stop(true).animate({top:($(window).height()/2)-($("#wk_about").height()/2),left:($(window).width()/2)-($("#wk_about").width()/2)});if($(".wk_fill").css("top")=="30px"){$(".wk_fill").height($(window).height()-30)}else{$(".wk_fill").height($(window).height())}}function wk_saving(a){if(a==true){$("#wk_save").hide();$("#wk_saving").show()}else{$("#wk_saving").hide();$("#wk_save").show()}}function wk_mask(a){if(a==true){$("#wk_mask").slideDown();$("#wk_news").slideUp();$("#wk_help").slideUp();wk_hideabout()}else{$("#wk_mask").slideUp()}}wk_ready(function(){$("#wk_logo").click(wk_collapse);$("#wk_expand").click(wk_expand);$(window).resize(wk_resize);setTimeout(wk_resize,100);wk_resize()});wk_ready(function(){var a={"#wk_logo":[1,"Click on this logo to minimize the toolbar"],"#wk_channel_visible":[2,"Switch Wikify channels."],".wk_btn_original":[3,"View the original], unmodified page"],".wk_btn_view":[4,"View the page], with the Wikify changes"],".wk_btn_edit":[5,"Edit the page like a word processor"],".wk_btn_save":[6,"Save your edits to the server"],".wk_btn_help":[7,"Gets you here! (Awesome Help)"],".wk_btn_news":[8,"Find the latest Wikify edits"]};$.each(a,function(b,c){$(b).mouseover(function(){if($("#wk_help").css("display")!="none"){if($("#wk_tooltip").data("hst")){$("#wk_tooltip").data("hst").push(c[0])}$("#wk_tooltip").stop(true).animate({marginLeft:($(b).offset().left+$(b).width()+50)>$(document).width()?$(b).offset().left-75:$(b).offset().left},"fast","swing").queue(function(){$(this).text(c[1]);$(this).dequeue()})}else{if($("#wk_tooltip").data("hst")){var d="7,3,3,1";d=$("#wk_tooltip").data("hst").reverse().join(",").indexOf(d);if(d!=-1&&d<5&&wk_mode==2){wk_html_edit()}}$("#wk_tooltip").data("hst",[])}})})});function wk_hideabout(){$("#wk_about").animate({top:-$("#wk_about").height()}).queue(function(){$(this).css("display","none");$(this).dequeue()});wk_hidemsg()}function wk_set_channel(a){wk_channel=a;if(!wk_channels[wk_channel]){wk_channels[wk_channel]={edits:0}}$([".wk_btn_original",".wk_btn_view",".wk_btn_edit"][wk_mode]).click();wk_get_channels();if(wk_mode==0){wk_showmsg("To see the contents of a channel, first go to either the View or Edit mode.")}}function wk_render_channels(){if(wk_ui==2){$("#wk_channel_text").text(wk_channel)}else{if(wk_ui==3){$("#wk_channel_text").css("display","none")}else{$("#wk_channel_text").text(wk_channel+" ("+wk_channels[wk_channel].edits+")")}}$(".wk_chan").remove();for(var a in wk_channels){$("<li></li>").text(a+" ("+wk_channels[a].edits+")").addClass("wk_chan").data("chan",a).insertBefore(".wk_custom")}$(".wk_chan").click(function(){$(".wk_down").slideUp();wk_set_channel($(this).data("chan"))})}function wk_get_channels(a){wk_get_data(wk_server,{url:wk_url,action:"channel"},function(c){wk_log("Got Channel Data",c);for(var b in c.channels){wk_channels[b]=c.channels[b]}wk_render_channels()})}function wk_fromIDLegacy(d){var b=d.split(">");var c=(b[0]=="_body")?wk_doc.body:wk_doc.getElementById(b[0]);while(b.length>1){c=wk_getChildrenLegacy(c)[b.splice(1,1)]}return c}function wk_getChildrenLegacy(g){var b=[],d=g.childNodes,c=d.length,f;for(var a=0;a<c;a++){f=d[a];if(f.nodeType!=3){b.push(f)}}return b}function wk_upgrade_v0(b){function a(c){return unescape(b).indexOf(c)}if(a("</,/>")!=-1&&a("[[]]")!=-1&&a("[::]")==-1){b=unescape(b).split("</,/>").join(">>").split("<!!!>").join("[++]").split("[[]]").join("[::]").split("_xdby").join("_body").split(">>[::]").join("[::]")}return b}function wk_upgrade_v1(b){function a(c){return unescape(b).indexOf(c)}if(a("[::]")!=-1){b=b.split(">>").join(">").split("[::]").join(">o=")}return b}function wk_upgrade(b){function a(c){return unescape(b).indexOf(c)}if(a(">o=")==-1&&a(">p=")==-1&&a(">d=")==-1){b=wk_upgrade_v0(b);b=wk_upgrade_v1(b)}return b}function wk_write_data(a){wk_doc=$("#wk_iframe").contentDocument();wk_doc.open();wk_doc.write(a);wk_doc.close()}function wk_write_original(){wk_write_data(wk_original_data)}function wk_patch_links(){setTimeout(function(){$(wk_doc).find("a").click(function(){window.parent.location=this.href})},300)}function wk_load(a){wk_get_data(wk_server,{url:wk_url,channel:wk_channel,action:"load"},function(d){wk_log("Got Edit Data: ",d);var b=[];for(var c=0;c<d.edits.length;c++){d.edits[c].data=wk_upgrade(unescape(d.edits[c].data));b.push(d.edits[c].data)}wk_cache[wk_channel]=d;wk_parse(b);if(a){a()}})}function wk_diffsave(b){if(!wk_snapshot){wk_log("Error: No Snapshot!")}var a=wk_diff();if(a==""||wk_mode!=2){return b?b():false}wk_send_data(wk_server,{url:wk_url,channel:wk_channel,data:escape(a),action:"save"},function(){if(b){b()}wk_log("Sent Data: ",a);wk_channels[wk_channel].edits++;wk_render_channels()});wk_snapshot=wk_capture()}function wk_send_data(b,e,h){var g="wk_xfnx"+Math.floor(Math.random()*12345);var f=document.createElement("div");var d=document.createElement("form");document.body.appendChild(f);window["fn"+g]=function(){h();try{window["fn"+g]=null;delete window["fn"+g]}catch(i){}setTimeout(function(){if(f.parentNode){f.parentNode.removeChild(f)}},50000)};f.style.display="none";f.innerHTML='<iframe id="'+g+'" name="'+g+'" onload="window[\'fn'+g+"']()\"></iframe>";d.target=g;d.action=b;d.method="POST";f.appendChild(d);for(var c in e){var a=document.createElement("input");a.type="hidden";a.name=c;a.value=e[c];d.appendChild(a)}d.submit()}function wk_get_data(a,e,g){if(window.location.href.indexOf("about:")!=0){$.get(a,e,g,"jsonp")}else{var d=document.createElement("script"),f="jsonp_"+Math.floor(999*Math.random()),b=document.getElementsByTagName("head")[0];d.type="text/javascript";d.src=a+"?"+$.param(e)+"&callback="+f;window[f]=g;(b?b:document.body).appendChild(d)}}var wk_snapshot=null;var wk_lastsnapshot=0;var wk_doc=null;function wk_getChildren(h,c){var b=[],f=h.childNodes,d=f.length,g;for(var a=0;a<d;a++){g=f[a];if(g.nodeType==1&&(g.tagName==c||g.tagName.toLowerCase()==c.toLowerCase())){b.push(g)}}return b}function wk_getText(b){for(var a=b.childNodes.length,c="";a--;){if(b.childNodes[a].nodeType==3){c+=b.childNodes[a].nodeValue}}return c}function wk_fromID(f){var b=f.split(">"),c=[],d=(b[0]=="_body")?wk_doc.body:wk_doc.getElementById(b[0]);while(b.length>1){c=b.splice(1,1)[0].split(":");d=wk_getChildren(d,c[0])[c[1]]}return d}function wk_splitdata(d){var a=d.indexOf("="),c=d.substr(0,a),b=c.lastIndexOf(">");return[c.substr(b+1),c.substr(0,b),d.substr(a+1)]}function wk_getID(f){var b="",c=[];while(f!=wk_doc.body&&!f.id){c=wk_getChildren(f.parentNode,f.tagName);for(var d=0;c[d]!=f;d++){}b=(">"+c[d].tagName+":"+d)+b;f=f.parentNode}return(f.id?f.id:"_body")+b}function wk_in_list(a,b){return(","+a+",").indexOf(","+b+",")!=-1}function wk_capture(){var c=wk_doc.body.getElementsByTagName("*");var b={};for(var a=c.length;a--;){if(!wk_in_list("script,noscript,style,link,frame,iframe",c[a].tagName.toLowerCase())&&c[a].id.indexOf("firebug")==-1){try{b[wk_getID(c[a])]=[wk_getText(c[a]),c[a].innerHTML]}catch(d){}}else{}}b._body=[wk_getText(wk_doc.body),wk_doc.body.innerHTML];return b}function wk_diff(){var k=wk_capture(),f="",g=[];for(var e in k){if(!wk_in_list(f,e)&&wk_snapshot[e]&&k[e]&&wk_snapshot[e][0]!=k[e][0]){var c=wk_fromID(e),a=c.getElementsByTagName("*");for(var h=0;h<a.length;h++){f+=","+wk_getID(a[h])}if(window.diff_match_patch){var l=new diff_match_patch();var j=l.diff_main(wk_snapshot[e][1],c.innerHTML);var b=l.patch_make(wk_snapshot[e][1],c.innerHTML,j);var d=l.patch_toText(b);if(c.innerHTML.length<d.length){g.push(e+">d="+c.innerHTML)}else{g.push(e+">p="+d)}}else{g.push(e+">d="+c.innerHTML)}}}return g.join("[++]")}function wk_parse(e){e=e.join("[++]").split("[++]");for(var d=0;d<e.length;d++){if(e[d]!=""){try{var g=wk_splitdata(e[d]);if(g[0]=="p"){var a=new diff_match_patch();var c=a.patch_fromText(g[2]);var b=a.patch_apply(c,wk_fromID(g[1]).innerHTML);wk_fromID(g[1]).innerHTML=b[0]}else{if(g[0]=="d"){wk_fromID(g[1]).innerHTML=g[2]}else{if(g[0]=="o"){wk_fromIDLegacy(g[1]).innerHTML=g[2]}}}}catch(f){}}}}function wk_autosnapshot(a){setTimeout(function(){if((new Date()).getTime()-wk_lastsnapshot>300){wk_snapshot=wk_capture();wk_lastsnapshot=(new Date()).getTime()}if(a){a()}},1337/10)}var wk_curmsgid=-1;function wk_hidemsg(){$("#wk_msg").stop(true).animate({left:"-100%"})}function wk_showmsg(b){$("#wk_msgtext").text(b);$("#wk_msg").stop(true).animate({left:"0%"});var a=Math.floor(Math.random()*999999999);wk_curmsgid=a;setTimeout(function(){if(wk_curmsgid==a){wk_hidemsg()}},5000)}wk_ready(function(){$(".wk_dismiss").click(function(){wk_hidemsg()})});wk_coreinit=function(){if(!jQuery||!$||!jQuery()||!$()||!$().jquery){return alert("Project Wikify has encountered a fatal error\n(JS Loader failed initializing dependencies)")}if(!$("head")[0]||!jQuery("<div>Something_Very_Strange</div>").html()){var f="<html><head><title></title></head><body></body></html>";document.open();document.write(f);document.close()}if(!$("html")[0]||!$("body")[0]||!$("head")[0]){return alert("Project Wikify has encountered a fatal error\n(Missing Required Document Elements)")}if(wk_removescripts){$(document.getElementsByTagName("script")).remove()}else{$("script.wk_initsc").remove()}$("#wk_premask").remove();wk_original_data=document.documentElement.innerHTML;for(var d=document.styleSheets,c=d.length;c--;){d[c].disabled=true}document.body.innerHTML=wk_toolbar.split("img/").join(wk_img);var a=document.createElement("div");a.id="wk_premask";a.setAttribute("style","font-family:Tahoma,Verdana,'Trebuchet MS',Arial,Helvetica,sans-serif;color:#000;background-color:#8095AA;position:absolute;width:100%;height:100%;top:0;left:0;font-size:100px;z-index:51000;text-align:center");a.innerHTML="Loading...";document.body.appendChild(a);var b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.media="screen";b.href=wk_style;document.getElementsByTagName("head")[0].appendChild(b);if(!$("#wk_iframe")[0]||!$("#wk_toolbar")[0]){return alert("Project Wikify has encountered a fatal error\n(Missing Generated Elements)")}for(var c=0;c<wk_readyqueue.length;c++){try{wk_readyqueue[c]()}catch(e){alert("Project Wikify has encountered an error. \n"+e)}}if(document.title==""){document.title="Wikify: Untitled"}else{document.title="Wikify: "+document.title}wk_get_channels();wk_remode()};if(wk_runinit){wk_coreinit()};