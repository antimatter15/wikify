function diff_match_patch(){this.Diff_Timeout=1;this.Diff_EditCost=4;this.Diff_DualThreshold=32;this.Match_Balance=0.5;this.Match_Threshold=0.5;this.Match_MinLength=100;this.Match_MaxLength=1000;this.Patch_Margin=4;function A(){var D=0;var B=1;var C=2;while(B!=C){D++;B=C;C=C<<1}return D}this.Match_MaxBits=A()}var DIFF_DELETE=-1;var DIFF_INSERT=1;var DIFF_EQUAL=0;diff_match_patch.prototype.diff_main=function(G,F,D){if(G==F){return[[DIFF_EQUAL,G]]}if(typeof D=="undefined"){D=true}var E=D;var A=this.diff_commonPrefix(G,F);var B=G.substring(0,A);G=G.substring(A);F=F.substring(A);A=this.diff_commonSuffix(G,F);var C=G.substring(G.length-A);G=G.substring(0,G.length-A);F=F.substring(0,F.length-A);var H=this.diff_compute(G,F,E);if(B){H.unshift([DIFF_EQUAL,B])}if(C){H.push([DIFF_EQUAL,C])}this.diff_cleanupMerge(H);return H};diff_match_patch.prototype.diff_compute=function(K,I,G){var A;if(!K){return[[DIFF_INSERT,I]]}if(!I){return[[DIFF_DELETE,K]]}var H=K.length>I.length?K:I;var O=K.length>I.length?I:K;var R=H.indexOf(O);if(R!=-1){A=[[DIFF_INSERT,H.substring(0,R)],[DIFF_EQUAL,O],[DIFF_INSERT,H.substring(R+O.length)]];if(K.length>I.length){A[0][0]=A[2][0]=DIFF_DELETE}return A}H=O=null;var C=this.diff_halfMatch(K,I);if(C){var N=C[0];var M=C[1];var E=C[2];var B=C[3];var W=C[4];var V=this.diff_main(N,E,G);var T=this.diff_main(M,B,G);return V.concat([[DIFF_EQUAL,W]],T)}if(G&&(K.length<100||I.length<100)){G=false}var J;if(G){var U=this.diff_linesToChars(K,I);K=U[0];I=U[1];J=U[2]}A=this.diff_map(K,I);if(!A){A=[[DIFF_DELETE,K],[DIFF_INSERT,I]]}if(G){this.diff_charsToLines(A,J);this.diff_cleanupSemantic(A);A.push([DIFF_EQUAL,""]);var P=0;var F=0;var L=0;var S="";var D="";while(P<A.length){switch(A[P][0]){case DIFF_INSERT:L++;D+=A[P][1];break;case DIFF_DELETE:F++;S+=A[P][1];break;case DIFF_EQUAL:if(F>=1&&L>=1){var U=this.diff_main(S,D,false);A.splice(P-F-L,F+L);P=P-F-L;for(var Q=U.length-1;Q>=0;Q--){A.splice(P,0,U[Q])}P=P+U.length}L=0;F=0;S="";D="";break}P++}A.pop()}return A};diff_match_patch.prototype.diff_linesToChars=function(G,F){var E=[];var A={};E[0]="";function B(M){var K="";var I=0;var L=-1;var J=E.length;while(L<M.length-1){L=M.indexOf("\n",I);if(L==-1){L=M.length-1}var H=M.substring(I,L+1);I=L+1;if(A.hasOwnProperty?A.hasOwnProperty(H):(A[H]!==undefined)){K+=String.fromCharCode(A[H])}else{K+=String.fromCharCode(J);A[H]=J;E[J++]=H}}return K}var D=B(G);var C=B(F);return[D,C,E]};diff_match_patch.prototype.diff_charsToLines=function(E,B){for(var A=0;A<E.length;A++){var C=E[A][1];var D=[];for(var F=0;F<C.length;F++){D[F]=B[C.charCodeAt(F)]}E[A][1]=D.join("")}};diff_match_patch.prototype.diff_map=function(J,H){var N=(new Date()).getTime()+this.Diff_Timeout*1000;var E=J.length+H.length-1;var M=this.Diff_DualThreshold*2<E;var C=[];var A=[];var D={};var B={};D[1]=0;B[1]=0;var I,G;var P;var Q={};var L=false;var K=!!(Q.hasOwnProperty);var F=(J.length+H.length)%2;for(var R=0;R<E;R++){if(this.Diff_Timeout>0&&(new Date()).getTime()>N){return null}C[R]={};for(var O=-R;O<=R;O+=2){if(O==-R||O!=R&&D[O-1]<D[O+1]){I=D[O+1]}else{I=D[O-1]+1}G=I-O;if(M){P=I+","+G;if(F&&(K?Q.hasOwnProperty(P):(Q[P]!==undefined))){L=true}if(!F){Q[P]=R}}while(!L&&I<J.length&&G<H.length&&J.charAt(I)==H.charAt(G)){I++;G++;if(M){P=I+","+G;if(F&&(K?Q.hasOwnProperty(P):(Q[P]!==undefined))){L=true}if(!F){Q[P]=R}}}D[O]=I;C[R][I+","+G]=true;if(I==J.length&&G==H.length){return this.diff_path1(C,J,H)}else{if(L){A=A.slice(0,Q[P]+1);var S=this.diff_path1(C,J.substring(0,I),H.substring(0,G));return S.concat(this.diff_path2(A,J.substring(I),H.substring(G)))}}}if(M){A[R]={};for(var O=-R;O<=R;O+=2){if(O==-R||O!=R&&B[O-1]<B[O+1]){I=B[O+1]}else{I=B[O-1]+1}G=I-O;P=(J.length-I)+","+(H.length-G);if(!F&&(K?Q.hasOwnProperty(P):(Q[P]!==undefined))){L=true}if(F){Q[P]=R}while(!L&&I<J.length&&G<H.length&&J.charAt(J.length-I-1)==H.charAt(H.length-G-1)){I++;G++;P=(J.length-I)+","+(H.length-G);if(!F&&(K?Q.hasOwnProperty(P):(Q[P]!==undefined))){L=true}if(F){Q[P]=R}}B[O]=I;A[R][I+","+G]=true;if(L){C=C.slice(0,Q[P]+1);var S=this.diff_path1(C,J.substring(0,J.length-I),H.substring(0,H.length-G));return S.concat(this.diff_path2(A,J.substring(J.length-I),H.substring(H.length-G)))}}}}return null};diff_match_patch.prototype.diff_path1=function(B,E,D){var F=[];var A=E.length;var H=D.length;var C=null;for(var G=B.length-2;G>=0;G--){while(1){if(B[G].hasOwnProperty?B[G].hasOwnProperty((A-1)+","+H):(B[G][(A-1)+","+H]!==undefined)){A--;if(C===DIFF_DELETE){F[0][1]=E.charAt(A)+F[0][1]}else{F.unshift([DIFF_DELETE,E.charAt(A)])}C=DIFF_DELETE;break}else{if(B[G].hasOwnProperty?B[G].hasOwnProperty(A+","+(H-1)):(B[G][A+","+(H-1)]!==undefined)){H--;if(C===DIFF_INSERT){F[0][1]=D.charAt(H)+F[0][1]}else{F.unshift([DIFF_INSERT,D.charAt(H)])}C=DIFF_INSERT;break}else{A--;H--;if(C===DIFF_EQUAL){F[0][1]=E.charAt(A)+F[0][1]}else{F.unshift([DIFF_EQUAL,E.charAt(A)])}C=DIFF_EQUAL}}}}return F};diff_match_patch.prototype.diff_path2=function(A,D,B){var I=[];var H=0;var G=D.length;var F=B.length;var C=null;for(var E=A.length-2;E>=0;E--){while(1){if(A[E].hasOwnProperty?A[E].hasOwnProperty((G-1)+","+F):(A[E][(G-1)+","+F]!==undefined)){G--;if(C===DIFF_DELETE){I[H-1][1]+=D.charAt(D.length-G-1)}else{I[H++]=[DIFF_DELETE,D.charAt(D.length-G-1)]}C=DIFF_DELETE;break}else{if(A[E].hasOwnProperty?A[E].hasOwnProperty(G+","+(F-1)):(A[E][G+","+(F-1)]!==undefined)){F--;if(C===DIFF_INSERT){I[H-1][1]+=B.charAt(B.length-F-1)}else{I[H++]=[DIFF_INSERT,B.charAt(B.length-F-1)]}C=DIFF_INSERT;break}else{G--;F--;if(C===DIFF_EQUAL){I[H-1][1]+=D.charAt(D.length-G-1)}else{I[H++]=[DIFF_EQUAL,D.charAt(D.length-G-1)]}C=DIFF_EQUAL}}}}return I};diff_match_patch.prototype.diff_commonPrefix=function(E,D){if(!E||!D||E.charCodeAt(0)!==D.charCodeAt(0)){return 0}var B=0;var F=Math.min(E.length,D.length);var A=F;var C=0;while(B<A){if(E.substring(C,A)==D.substring(C,A)){B=A;C=B}else{F=A}A=Math.floor((F-B)/2+B)}return A};diff_match_patch.prototype.diff_commonSuffix=function(D,C){if(!D||!C||D.charCodeAt(D.length-1)!==C.charCodeAt(C.length-1)){return 0}var B=0;var E=Math.min(D.length,C.length);var A=E;var F=0;while(B<A){if(D.substring(D.length-A,D.length-F)==C.substring(C.length-A,C.length-F)){B=A;F=B}else{E=A}A=Math.floor((E-B)/2+B)}return A};diff_match_patch.prototype.diff_halfMatch=function(C,B){var K=C.length>B.length?C:B;var D=C.length>B.length?B:C;if(K.length<10||D.length<1){return null}var N=this;function I(V,O,R){var T=V.substring(R,R+Math.floor(V.length/4));var P=-1;var Z="";var S,Q,Y,X;while((P=O.indexOf(T,P+1))!=-1){var U=N.diff_commonPrefix(V.substring(R),O.substring(P));var W=N.diff_commonSuffix(V.substring(0,R),O.substring(0,P));if(Z.length<W+U){Z=O.substring(P-W,P)+O.substring(P,P+U);S=V.substring(0,R-W);Q=V.substring(R+U);Y=O.substring(0,P-W);X=O.substring(P+U)}}if(Z.length>=V.length/2){return[S,Q,Y,X,Z]}else{return null}}var G=I(K,D,Math.ceil(K.length/4));var F=I(K,D,Math.ceil(K.length/2));var A;if(!G&&!F){return null}else{if(!F){A=G}else{if(!G){A=F}else{A=G[4].length>F[4].length?G:F}}}var J,H,M,L;if(C.length>B.length){J=A[0];H=A[1];M=A[2];L=A[3]}else{M=A[0];L=A[1];J=A[2];H=A[3]}var E=A[4];return[J,H,M,L,E]};diff_match_patch.prototype.diff_cleanupSemantic=function(H){var D=false;var A=[];var F=0;var E=null;var G=0;var C=0;var B=0;while(G<H.length){if(H[G][0]==DIFF_EQUAL){A[F++]=G;C=B;B=0;E=H[G][1]}else{B+=H[G][1].length;if(E!==null&&(E.length<=C)&&(E.length<=B)){H.splice(A[F-1],0,[DIFF_DELETE,E]);H[A[F-1]+1][0]=DIFF_INSERT;F--;F--;G=F>0?A[F-1]:-1;C=0;B=0;E=null;D=true}}G++}if(D){this.diff_cleanupMerge(H)}this.diff_cleanupSemanticLossless(H)};diff_match_patch.prototype.diff_cleanupSemanticLossless=function(B){var E=/[^a-zA-Z0-9]/;var Q=/\s/;var D=/[\r\n]/;var J=/\n\r?\n$/;var A=/^\r?\n\r?\n/;function F(T,S){if(!T||!S){return 5}var U=0;if(T.charAt(T.length-1).match(E)||S.charAt(0).match(E)){U++;if(T.charAt(T.length-1).match(Q)||S.charAt(0).match(Q)){U++;if(T.charAt(T.length-1).match(D)||S.charAt(0).match(D)){U++;if(T.match(J)||S.match(A)){U++}}}}return U}var N=1;while(N<B.length-1){if(B[N-1][0]==DIFF_EQUAL&&B[N+1][0]==DIFF_EQUAL){var H=B[N-1][1];var L=B[N][1];var G=B[N+1][1];var R=this.diff_commonSuffix(H,L);if(R){var C=L.substring(L.length-R);H=H.substring(0,H.length-R);L=C+L.substring(0,L.length-R);G=C+G}var O=H;var K=L;var M=G;var I=F(H,L)+F(L,G);while(L.charAt(0)===G.charAt(0)){H+=L.charAt(0);L=L.substring(1)+G.charAt(0);G=G.substring(1);var P=F(H,L)+F(L,G);if(P>=I){I=P;O=H;K=L;M=G}}if(B[N-1][1]!=O){if(O){B[N-1][1]=O}else{B.splice(N-1,1);N--}B[N][1]=K;if(M){B[N+1][1]=M}else{B.splice(N+1,1);N--}}}N++}};diff_match_patch.prototype.diff_cleanupEfficiency=function(G){var I=false;var F=[];var C=0;var D="";var A=0;var H=false;var J=false;var B=false;var E=false;while(A<G.length){if(G[A][0]==DIFF_EQUAL){if(G[A][1].length<this.Diff_EditCost&&(B||E)){F[C++]=A;H=B;J=E;D=G[A][1]}else{C=0;D=""}B=E=false}else{if(G[A][0]==DIFF_DELETE){E=true}else{B=true}if(D&&((H&&J&&B&&E)||((D.length<this.Diff_EditCost/2)&&(H+J+B+E)==3))){G.splice(F[C-1],0,[DIFF_DELETE,D]);G[F[C-1]+1][0]=DIFF_INSERT;C--;D="";if(H&&J){B=E=true;C=0}else{C--;A=C>0?F[C-1]:-1;B=E=false}I=true}}A++}if(I){this.diff_cleanupMerge(G)}};diff_match_patch.prototype.diff_cleanupMerge=function(H){H.push([DIFF_EQUAL,""]);var G=0;var F=0;var E=0;var C="";var B="";var A;while(G<H.length){switch(H[G][0]){case DIFF_INSERT:E++;B+=H[G][1];G++;break;case DIFF_DELETE:F++;C+=H[G][1];G++;break;case DIFF_EQUAL:if(F!==0||E!==0){if(F!==0&&E!==0){A=this.diff_commonPrefix(B,C);if(A!==0){if((G-F-E)>0&&H[G-F-E-1][0]==DIFF_EQUAL){H[G-F-E-1][1]+=B.substring(0,A)}else{H.splice(0,0,[DIFF_EQUAL,B.substring(0,A)]);G++}B=B.substring(A);C=C.substring(A)}A=this.diff_commonSuffix(B,C);if(A!==0){H[G][1]=B.substring(B.length-A)+H[G][1];B=B.substring(0,B.length-A);C=C.substring(0,C.length-A)}}if(F===0){H.splice(G-F-E,F+E,[DIFF_INSERT,B])}else{if(E===0){H.splice(G-F-E,F+E,[DIFF_DELETE,C])}else{H.splice(G-F-E,F+E,[DIFF_DELETE,C],[DIFF_INSERT,B])}}G=G-F-E+(F?1:0)+(E?1:0)+1}else{if(G!==0&&H[G-1][0]==DIFF_EQUAL){H[G-1][1]+=H[G][1];H.splice(G,1)}else{G++}}E=0;F=0;C="";B="";break}}if(H[H.length-1][1]===""){H.pop()}var D=false;G=1;while(G<H.length-1){if(H[G-1][0]==DIFF_EQUAL&&H[G+1][0]==DIFF_EQUAL){if(H[G][1].substring(H[G][1].length-H[G-1][1].length)==H[G-1][1]){H[G][1]=H[G-1][1]+H[G][1].substring(0,H[G][1].length-H[G-1][1].length);H[G+1][1]=H[G-1][1]+H[G+1][1];H.splice(G-1,1);D=true}else{if(H[G][1].substring(0,H[G+1][1].length)==H[G+1][1]){H[G-1][1]+=H[G+1][1];H[G][1]=H[G][1].substring(H[G+1][1].length)+H[G+1][1];H.splice(G+1,1);D=true}}}G++}if(D){this.diff_cleanupMerge(H)}};diff_match_patch.prototype.diff_xIndex=function(G,F){var D=0;var B=0;var E=0;var C=0;var A;for(A=0;A<G.length;A++){if(G[A][0]!==DIFF_INSERT){D+=G[A][1].length}if(G[A][0]!==DIFF_DELETE){B+=G[A][1].length}if(D>F){break}E=D;C=B}if(G.length!=A&&G[A][0]===DIFF_DELETE){return C}return C+(F-E)};diff_match_patch.prototype.diff_prettyHtml=function(F){var C=[];var B=0;for(var A=0;A<F.length;A++){var G=F[A][0];var D=F[A][1];var E=D.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"&para;<BR>");switch(G){case DIFF_INSERT:C[A]='<INS STYLE="background:#E6FFE6;" TITLE="i='+B+'">'+E+"</INS>";break;case DIFF_DELETE:C[A]='<DEL STYLE="background:#FFE6E6;" TITLE="i='+B+'">'+E+"</DEL>";break;case DIFF_EQUAL:C[A]='<SPAN TITLE="i='+B+'">'+E+"</SPAN>";break}if(G!==DIFF_DELETE){B+=D.length}}return C.join("")};diff_match_patch.prototype.diff_text1=function(C){var B=[];for(var A=0;A<C.length;A++){if(C[A][0]!==DIFF_INSERT){B[A]=C[A][1]}}return B.join("")};diff_match_patch.prototype.diff_text2=function(C){var B=[];for(var A=0;A<C.length;A++){if(C[A][0]!==DIFF_DELETE){B[A]=C[A][1]}}return B.join("")};diff_match_patch.prototype.diff_toDelta=function(C){var B=[];for(var A=0;A<C.length;A++){switch(C[A][0]){case DIFF_INSERT:B[A]="+"+encodeURI(C[A][1]);break;case DIFF_DELETE:B[A]="-"+C[A][1].length;break;case DIFF_EQUAL:B[A]="="+C[A][1].length;break}}return B.join("\t").replace(/\x00/g,"%00").replace(/%20/g," ")};diff_match_patch.prototype.diff_fromDelta=function(B,J){var F=[];var E=0;var A=0;J=J.replace(/%00/g,"\0");var H=J.split(/\t/g);for(var I=0;I<H.length;I++){var D=H[I].substring(1);switch(H[I].charAt(0)){case"+":try{F[E++]=[DIFF_INSERT,decodeURI(D)]}catch(G){throw new Error("Illegal escape in diff_fromDelta: "+D)}break;case"-":case"=":var C=parseInt(D,10);if(isNaN(C)||C<0){throw new Error("Invalid number in diff_fromDelta: "+D)}var K=B.substring(A,A+=C);if(H[I].charAt(0)=="="){F[E++]=[DIFF_EQUAL,K]}else{F[E++]=[DIFF_DELETE,K]}break;default:if(H[I]){throw new Error("Invalid diff operation in diff_fromDelta: "+H[I])}}}if(A!=B.length){throw new Error("Delta length ("+A+") does not equal source text length ("+B.length+").")}return F};diff_match_patch.prototype.match_main=function(C,A,B){B=Math.max(0,Math.min(B,C.length-A.length));if(C==A){return 0}else{if(C.length===0){return null}else{if(C.substring(B,B+A.length)==A){return B}else{return this.match_bitap(C,A,B)}}}};diff_match_patch.prototype.match_bitap=function(J,Q,H){if(Q.length>this.Match_MaxBits){throw new Error("Pattern too long for this browser.")}var K=this.match_alphabet(Q);var T=J.length;T=Math.max(T,this.Match_MinLength);T=Math.min(T,this.Match_MaxLength);var A=this;function B(V,U){var W=Math.abs(H-U);return(V/Q.length/A.Match_Balance)+(W/T/(1-A.Match_Balance))}var M=this.Match_Threshold;var C=J.indexOf(Q,H);if(C!=-1){M=Math.min(B(0,C),M)}C=J.lastIndexOf(Q,H+Q.length);if(C!=-1){M=Math.min(B(0,C),M)}var S=1<<(Q.length-1);C=null;var E,I;var F=Math.max(H+H,J.length);var G;for(var R=0;R<Q.length;R++){var N=Array(J.length);E=H;I=F;while(E<I){if(B(R,I)<M){E=I}else{F=I}I=Math.floor((F-E)/2+E)}F=I;var D=Math.max(0,H-(I-H)-1);var L=Math.min(J.length-1,Q.length+I);if(J.charAt(L)==Q.charAt(Q.length-1)){N[L]=(1<<(R+1))-1}else{N[L]=(1<<R)-1}for(var O=L-1;O>=D;O--){if(R===0){N[O]=((N[O+1]<<1)|1)&K[J.charAt(O)]}else{N[O]=((N[O+1]<<1)|1)&K[J.charAt(O)]|((G[O+1]<<1)|1)|((G[O]<<1)|1)|G[O+1]}if(N[O]&S){var P=B(R,O);if(P<=M){M=P;C=O;if(O>H){D=Math.max(0,H-(O-H))}else{break}}}}if(B(R+1,H)>M){break}G=N}return C};diff_match_patch.prototype.match_alphabet=function(C){var B={};for(var A=0;A<C.length;A++){B[C.charAt(A)]=0}for(var A=0;A<C.length;A++){B[C.charAt(A)]|=1<<(C.length-A-1)}return B};diff_match_patch.prototype.patch_addContext=function(F,E){var B=E.substring(F.start2,F.start2+F.length1);var D=0;while(E.indexOf(B)!=E.lastIndexOf(B)&&B.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin){D+=this.Patch_Margin;B=E.substring(F.start2-D,F.start2+F.length1+D)}D+=this.Patch_Margin;var A=E.substring(F.start2-D,F.start2);if(A!==""){F.diffs.unshift([DIFF_EQUAL,A])}var C=E.substring(F.start2+F.length1,F.start2+F.length1+D);if(C!==""){F.diffs.push([DIFF_EQUAL,C])}F.start1-=A.length;F.start2-=A.length;F.length1+=A.length+C.length;F.length2+=A.length+C.length};diff_match_patch.prototype.patch_make=function(N,B,O){var C,J;if(typeof N=="string"&&typeof B=="string"&&typeof O=="undefined"){C=N;J=this.diff_main(C,B,true);if(J.length>2){this.diff_cleanupSemantic(J);this.diff_cleanupEfficiency(J)}}else{if(typeof N=="object"&&typeof B=="undefined"&&typeof O=="undefined"){J=N;C=this.diff_text1(J)}else{if(typeof N=="string"&&typeof B=="object"&&typeof O=="undefined"){C=N;J=B}else{if(typeof N=="string"&&typeof B=="string"&&typeof O=="object"){C=N;J=O}else{throw new Error("Unknown call format to patch_make.")}}}}if(J.length===0){return[]}var A=[];var D=new patch_obj();var G=0;var I=0;var H=0;var F=C;var L=C;for(var M=0;M<J.length;M++){var E=J[M][0];var K=J[M][1];if(!G&&E!==DIFF_EQUAL){D.start1=I;D.start2=H}switch(E){case DIFF_INSERT:D.diffs[G++]=J[M];D.length2+=K.length;L=L.substring(0,H)+K+L.substring(H);break;case DIFF_DELETE:D.length1+=K.length;D.diffs[G++]=J[M];L=L.substring(0,H)+L.substring(H+K.length);break;case DIFF_EQUAL:if(K.length<=2*this.Patch_Margin&&G&&J.length!=M+1){D.diffs[G++]=J[M];D.length1+=K.length;D.length2+=K.length}else{if(K.length>=2*this.Patch_Margin){if(G){this.patch_addContext(D,F);A.push(D);D=new patch_obj();G=0;F=L}}}break}if(E!==DIFF_INSERT){I+=K.length}if(E!==DIFF_DELETE){H+=K.length}}if(G){this.patch_addContext(D,F);A.push(D)}return A};diff_match_patch.prototype.patch_apply=function(F,K){if(F.length==0){return[K,[]]}var P=[];for(var I=0;I<F.length;I++){var B=F[I];var L=new patch_obj();L.diffs=B.diffs.slice();L.start1=B.start1;L.start2=B.start2;L.length1=B.length1;L.length2=B.length2;P[I]=L}F=P;var R=this.patch_addPadding(F);K=R+K+R;this.patch_splitMax(F);var O=0;var N=[];for(var I=0;I<F.length;I++){var C=F[I].start2+O;var J=this.diff_text1(F[I].diffs);var M=this.match_main(K,J,C);if(M===null){N[I]=false}else{N[I]=true;O=M-C;var H=K.substring(M,M+J.length);if(J==H){K=K.substring(0,M)+this.diff_text2(F[I].diffs)+K.substring(M+J.length)}else{var A=this.diff_main(J,H,false);this.diff_cleanupSemanticLossless(A);var E=0;var D;for(var G=0;G<F[I].diffs.length;G++){var Q=F[I].diffs[G];if(Q[0]!==DIFF_EQUAL){D=this.diff_xIndex(A,E)}if(Q[0]===DIFF_INSERT){K=K.substring(0,M+D)+Q[1]+K.substring(M+D)}else{if(Q[0]===DIFF_DELETE){K=K.substring(0,M+D)+K.substring(M+this.diff_xIndex(A,E+Q[1].length))}}if(Q[0]!==DIFF_DELETE){E+=Q[1].length}}}}}K=K.substring(R.length,K.length-R.length);return[K,N]};diff_match_patch.prototype.patch_addPadding=function(C){var B="";for(var A=0;A<this.Patch_Margin;A++){B+=String.fromCharCode(A)}for(var A=0;A<C.length;A++){C[A].start1+=B.length;C[A].start2+=B.length}var F=C[0];var E=F.diffs;if(E.length==0||E[0][0]!=DIFF_EQUAL){E.unshift([DIFF_EQUAL,B]);F.start1-=B.length;F.start2-=B.length;F.length1+=B.length;F.length2+=B.length}else{if(B.length>E[0][1].length){var D=B.length-E[0][1].length;E[0][1]=B.substring(E[0][1].length)+E[0][1];F.start1-=D;F.start2-=D;F.length1+=D;F.length2+=D}}F=C[C.length-1];E=F.diffs;if(E.length==0||E[E.length-1][0]!=DIFF_EQUAL){E.push([DIFF_EQUAL,B]);F.length1+=B.length;F.length2+=B.length}else{if(B.length>E[E.length-1][1].length){var D=B.length-E[E.length-1][1].length;E[E.length-1][1]+=B.substring(0,D);F.length1+=D;F.length2+=D}}return B};diff_match_patch.prototype.patch_splitMax=function(A){for(var L=0;L<A.length;L++){if(A[L].length1>this.Match_MaxBits){var F=A[L];A.splice(L--,1);var I=this.Match_MaxBits;var C=F.start1;var B=F.start2;var G="";while(F.diffs.length!==0){var E=new patch_obj();var J=true;E.start1=C-G.length;E.start2=B-G.length;if(G!==""){E.length1=E.length2=G.length;E.diffs.push([DIFF_EQUAL,G])}while(F.diffs.length!==0&&E.length1<I-this.Patch_Margin){var H=F.diffs[0][0];var K=F.diffs[0][1];if(H===DIFF_INSERT){E.length2+=K.length;B+=K.length;E.diffs.push(F.diffs.shift());J=false}else{K=K.substring(0,I-E.length1-this.Patch_Margin);E.length1+=K.length;C+=K.length;if(H===DIFF_EQUAL){E.length2+=K.length;B+=K.length}else{J=false}E.diffs.push([H,K]);if(K==F.diffs[0][1]){F.diffs.shift()}else{F.diffs[0][1]=F.diffs[0][1].substring(K.length)}}}G=this.diff_text2(E.diffs);G=G.substring(G.length-this.Patch_Margin);var D=this.diff_text1(F.diffs).substring(0,this.Patch_Margin);if(D!==""){E.length1+=D.length;E.length2+=D.length;if(E.diffs.length!==0&&E.diffs[E.diffs.length-1][0]===DIFF_EQUAL){E.diffs[E.diffs.length-1][1]+=D}else{E.diffs.push([DIFF_EQUAL,D])}}if(!J){A.splice(++L,0,E)}}}}};diff_match_patch.prototype.patch_toText=function(B){var C=[];for(var A=0;A<B.length;A++){C[A]=B[A]}return C.join("")};diff_match_patch.prototype.patch_fromText=function(F){var A=[];if(!F){return A}F=F.replace(/%00/g,"\0");var G=F.split("\n");var H=0;while(H<G.length){var D=G[H].match(/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/);if(!D){throw new Error("Invalid patch string: "+G[H])}var B=new patch_obj();A.push(B);B.start1=parseInt(D[1],10);if(D[2]===""){B.start1--;B.length1=1}else{if(D[2]=="0"){B.length1=0}else{B.start1--;B.length1=parseInt(D[2],10)}}B.start2=parseInt(D[3],10);if(D[4]===""){B.start2--;B.length2=1}else{if(D[4]=="0"){B.length2=0}else{B.start2--;B.length2=parseInt(D[4],10)}}H++;while(H<G.length){var C=G[H].charAt(0);try{var I=decodeURI(G[H].substring(1))}catch(E){throw new Error("Illegal escape in patch_fromText: "+I)}if(C=="-"){B.diffs.push([DIFF_DELETE,I])}else{if(C=="+"){B.diffs.push([DIFF_INSERT,I])}else{if(C==" "){B.diffs.push([DIFF_EQUAL,I])}else{if(C=="@"){break}else{if(C===""){}else{throw new Error('Invalid patch mode "'+C+'" in: '+I)}}}}}H++}}return A};function patch_obj(){this.diffs=[];this.start1=null;this.start2=null;this.length1=0;this.length2=0}patch_obj.prototype.toString=function(){var B,E;if(this.length1===0){B=this.start1+",0"}else{if(this.length1==1){B=this.start1+1}else{B=(this.start1+1)+","+this.length1}}if(this.length2===0){E=this.start2+",0"}else{if(this.length2==1){E=this.start2+1}else{E=(this.start2+1)+","+this.length2}}var C=["@@ -"+B+" +"+E+" @@\n"];var D;for(var A=0;A<this.diffs.length;A++){switch(this.diffs[A][0]){case DIFF_INSERT:D="+";break;case DIFF_DELETE:D="-";break;case DIFF_EQUAL:D=" ";break}C[A+1]=D+encodeURI(this.diffs[A][1])+"\n"}return C.join("").replace(/\x00/g,"%00").replace(/%20/g," ")};